var a;a||(a=!0,(()=>{'use strict';const f=console.error.bind(console,"[PiPer] ");const g={"button-title":{en:"Open Picture in Picture mode",de:"Bild-in-Bild starten",nl:"Beeld in beeld starten",fr:"D\u00e9marrer Image dans l\u2019image"},donate:{en:"Donate",de:"Spenden"},"donate-small":{en:"Small donation"},"donate-medium":{en:"Medium donation"},"donate-large":{en:"Grand donation"},"total-donations":{en:"Total donations:"},"donate-error":{en:"In-app purchase unavailable"},"report-bug":{en:"Report a bug",de:"Einen Fehler melden"},options:{en:"Options"},"install-thanks":{en:"Thanks for adding PiPer!"},
enable:{en:"Enable"},"safari-disabled-warning":{en:"Extension is currently disabled, enable in Safari preferences"},"chrome-flags-open":{en:"Open Chrome Flags"},"chrome-flags-warning":{en:'Before you get started you need to enable the chrome flag [emphasis]"SurfaceLayer objects for videos"[/emphasis]'}};function h(b,a=navigator.language.substring(0,2)){const c=g[b];if(c&&(a=c[a]||c.en))return a;f(`No localized string found for key '${b}'`);return""}
function k(b){var a=[["emphasis",'<span class="warning-emphasis">'],["/emphasis","</span>"]];b=h(b,void 0);for(let c=a.length;c--;){let d=a[c];/[^-_0-9a-zA-Z\/]/.test(d[0])&&f(`Invalid characters used in localized string tag '${d[0]}'`);b=b.replace(new RegExp(`\\[${d[0]}\\]`,"g"),d[1])}return b};const l=document.getElementsByTagName("html")[0];l.style.display="none";
document.addEventListener("DOMContentLoaded",function(){const b=document.getElementsByClassName("localized-string");for(let d=0,e;e=b[d];d++){var a=e.textContent.trim();a="chrome-flags-warning"==a?k(a):h(a);e.innerHTML=a}l.style.removeProperty("display");document.getElementById("warning-button").addEventListener("click",function(){chrome.tabs.create({url:"chrome://flags/#enable-surfaces-for-videos"})});const c=document.getElementById("test-video");c.addEventListener("loadeddata",function(){c.requestPictureInPicture().catch(function(d){~d.message.indexOf("Picture-in-Picture is not available")&&
(document.getElementById("warning").style.display="flex")})})});})());
//# sourceMappingURL=data:application/json;base64,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QUlkLEVBQVEsQ0FBWixDQUFlZSxDQUFwQixDQUE2QkEsQ0FBN0IsQ0FBdUNGLENBQUEsQ0FBa0JiLENBQWxCLENBQXZDLENBQWlFQSxDQUFBLEVBQWpFLENBQTBFLENBQ3hFLElBQU1ULEVBQU13QixDQUFBLENBQVFDLFdBQVIsQ0FBb0JDLElBQXBCLEVBSVZyQixFQUFBLENBRFMsc0JBQVgsRUFBSUwsQ0FBSixDQUNXTyxDQUFBLENBQWdDUCxDQUFoQyxDQURYLENBTVdELENBQUEsQ0FBZ0JDLENBQWhCLENBR1h3QixFQUFBLENBQVFHLFNBQVIsQ0FBb0J0QixDQWJvRCxDQWlCMUVXLENBQUEsQ0FBUUcsS0FBUixDQUFjUyxjQUFkLENBQTZCLFNBQTdCLENBR0FYLFNBQUEsQ0FBU1ksY0FBVCxDQUF3QixnQkFBeEIsQ0FBQSxDQUEwQ1IsZ0JBQTFDLENBQTJELE9BQTNELENBQW9FLFFBQVEsRUFBUSxDQUNsRlMsTUFBQSxDQUFPQyxJQUFQLENBQVlDLE1BQVosQ0FBbUIsQ0FBQ0MsSUFBSyw0Q0FBTixDQUFuQixDQURrRixDQUFwRixDQUtBLE9BQU1DLEVBQXlDakIsUUFBQSxDQUFTWSxjQUFULENBQXdCLFlBQXhCLENBQy9DSyxFQUFBLENBQU1iLGdCQUFOLENBQXVCLFlBQXZCLENBQXFDLFFBQVEsRUFBRyxDQUM5Q2EsQ0FBQSxDQUFNQyx1QkFBTixFQUFBLENBQWdDQyxLQUFoQyxDQUFzQyxRQUFRLENBQUMxQyxDQUFELENBQVEsQ0FFaEQsQ0FEdUNBLENBQ3RDLENBRDZDMkMsT0FDN0MsQ0FBYUMsT0FBYixDQUFxQixxQ0FBckIsQ0FBTDtDQUVFckIsUUFBQSxDQUFTWSxjQUFULENBQXdCLFNBQXhCLENBRkYsQ0FFcUNWLEtBRnJDLENBRTJDQyxPQUYzQyxDQUVxRCxNQUZyRCxDQUZvRCxDQUF0RCxDQUQ4QyxDQUFoRCxDQTlCdUQsQ0FBekQ7IiwKInNvdXJjZXMiOlsiLi9sb2dnZXIuanMiLCIuL2xvY2FsaXphdGlvbi5qcyIsIi4vaW5zdGFsbC5qcyJdLAoic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTE9HR0lOR19MRVZFTCB9IGZyb20gJy4vZGVmaW5lcy5qcydcblxuY29uc3QgbG9nZ2luZ1ByZWZpeCA9ICdbUGlQZXJdICc7XG5cbi8qKiBAZW51bSB7bnVtYmVyfSAtIEVudW0gZm9yIGxvZ2dpbmcgbGV2ZWwgKi9cbmV4cG9ydCBjb25zdCBMb2dnaW5nTGV2ZWwgPSB7XG4gIEFMTDogMCxcbiAgVFJBQ0U6IDEwLFxuICBJTkZPOiAyMCxcbiAgV0FSTklORzogMzAsXG4gIEVSUk9SOiA0MCxcbn07XG5cbi8qKlxuICogTG9ncyBzdGFjayB0cmFjZSB0byBjb25zb2xlXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFjZSA9IChMb2dnaW5nTGV2ZWwuVFJBQ0UgPj0gTE9HR0lOR19MRVZFTCkgPyBcbiAgICBjb25zb2xlLnRyYWNlLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbigpe307XG5cbi8qKlxuICogTG9ncyBpbmZvcm1hdGlvbmFsIG1lc3NhZ2UgdG8gY29uc29sZVxuICovXG5leHBvcnQgY29uc3QgaW5mbyA9IChMb2dnaW5nTGV2ZWwuSU5GTyA+PSBMT0dHSU5HX0xFVkVMKSA/IFxuICAgIGNvbnNvbGUuaW5mby5iaW5kKGNvbnNvbGUsIGxvZ2dpbmdQcmVmaXgpIDogZnVuY3Rpb24oKXt9O1xuICAgIFxuLyoqXG4gKiBMb2dzIHdhcm5pbmcgbWVzc2FnZSB0byBjb25zb2xlXG4gKi9cbmV4cG9ydCBjb25zdCB3YXJuID0gKExvZ2dpbmdMZXZlbC5XQVJOSU5HID49IExPR0dJTkdfTEVWRUwpID8gXG4gICAgY29uc29sZS53YXJuLmJpbmQoY29uc29sZSwgbG9nZ2luZ1ByZWZpeCkgOiBmdW5jdGlvbigpe307XG4gICAgXG4vKipcbiAqIExvZ3MgZXJyb3IgbWVzc2FnZSB0byBjb25zb2xlXG4gKi9cbmV4cG9ydCBjb25zdCBlcnJvciA9IChMb2dnaW5nTGV2ZWwuRVJST1IgPj0gTE9HR0lOR19MRVZFTCkgPyBcbiAgICBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSwgbG9nZ2luZ1ByZWZpeCkgOiBmdW5jdGlvbigpe307XG4iLCJpbXBvcnQgeyBlcnJvciB9IGZyb20gJy4vbG9nZ2VyLmpzJ1xuXG5jb25zdCBsb2NhbGl6YXRpb25zID0ge307XG5cbmxvY2FsaXphdGlvbnNbJ2J1dHRvbi10aXRsZSddID0ge1xuICAnZW4nOiAnT3BlbiBQaWN0dXJlIGluIFBpY3R1cmUgbW9kZScsXG4gICdkZSc6ICdCaWxkLWluLUJpbGQgc3RhcnRlbicsXG4gICdubCc6ICdCZWVsZCBpbiBiZWVsZCBzdGFydGVuJyxcbiAgJ2ZyJzogJ0RcdTAwZTltYXJyZXIgSW1hZ2UgZGFucyBsXHUyMDE5aW1hZ2UnLFxufTtcblxubG9jYWxpemF0aW9uc1snZG9uYXRlJ10gPSB7XG4gICdlbic6ICdEb25hdGUnLFxuICAnZGUnOiAnU3BlbmRlbicsXG59O1xuXG5sb2NhbGl6YXRpb25zWydkb25hdGUtc21hbGwnXSA9IHtcbiAgJ2VuJzogJ1NtYWxsIGRvbmF0aW9uJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ2RvbmF0ZS1tZWRpdW0nXSA9IHtcbiAgJ2VuJzogJ01lZGl1bSBkb25hdGlvbicsXG59O1xuXG5sb2NhbGl6YXRpb25zWydkb25hdGUtbGFyZ2UnXSA9IHtcbiAgJ2VuJzogJ0dyYW5kIGRvbmF0aW9uJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ3RvdGFsLWRvbmF0aW9ucyddID0ge1xuICAnZW4nOiAnVG90YWwgZG9uYXRpb25zOicsXG59O1xuXG5sb2NhbGl6YXRpb25zWydkb25hdGUtZXJyb3InXSA9IHtcbiAgJ2VuJzogJ0luLWFwcCBwdXJjaGFzZSB1bmF2YWlsYWJsZScsXG59O1xuXG5sb2NhbGl6YXRpb25zWydyZXBvcnQtYnVnJ10gPSB7XG4gICdlbic6ICdSZXBvcnQgYSBidWcnLFxuICAnZGUnOiAnRWluZW4gRmVobGVyIG1lbGRlbicsXG59O1xuXG5sb2NhbGl6YXRpb25zWydvcHRpb25zJ10gPSB7XG4gICdlbic6ICdPcHRpb25zJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ2luc3RhbGwtdGhhbmtzJ10gPSB7XG4gICdlbic6ICdUaGFua3MgZm9yIGFkZGluZyBQaVBlciEnLFxufTtcblxubG9jYWxpemF0aW9uc1snZW5hYmxlJ10gPSB7XG4gICdlbic6ICdFbmFibGUnLFxufTtcblxubG9jYWxpemF0aW9uc1snc2FmYXJpLWRpc2FibGVkLXdhcm5pbmcnXSA9IHtcbiAgJ2VuJzogJ0V4dGVuc2lvbiBpcyBjdXJyZW50bHkgZGlzYWJsZWQsIGVuYWJsZSBpbiBTYWZhcmkgcHJlZmVyZW5jZXMnLFxufTtcblxubG9jYWxpemF0aW9uc1snY2hyb21lLWZsYWdzLW9wZW4nXSA9IHtcbiAgJ2VuJzogJ09wZW4gQ2hyb21lIEZsYWdzJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ2Nocm9tZS1mbGFncy13YXJuaW5nJ10gPSB7XG4gICdlbic6ICdCZWZvcmUgeW91IGdldCBzdGFydGVkIHlvdSBuZWVkIHRvIGVuYWJsZSB0aGUgY2hyb21lIGZsYWcgW2VtcGhhc2lzXVwiU3VyZmFjZUxheWVyIG9iamVjdHMgZm9yIHZpZGVvc1wiWy9lbXBoYXNpc10nLFxufTtcblxuLy8gU2V0IEVuZ2xpc2ggYXMgdGhlIGRlZmF1bHQgZmFsbGJhY2sgbGFuZ3VhZ2VcbmNvbnN0IGRlZmF1bHRMYW5ndWFnZSA9ICdlbic7XG5cbi8qKlxuICogUmV0dXJucyBhIGxvY2FsaXplZCB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcgZGVzaWduYXRlZCBieSB0aGUgc3BlY2lmaWVkIGtleVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSB0aGUga2V5IGZvciBhIHN0cmluZyBcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbGFuZ3VhZ2UgLSB0d28tbGV0dGVyIElTTyA2MzktMSBsYW5ndWFnZSBjb2RlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBsb2NhbGl6ZWRTdHJpbmcgPSBmdW5jdGlvbihrZXksIGxhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlLnN1YnN0cmluZygwLCAyKSkge1xuICBcbiAgLy8gR2V0IGFsbCBsb2NhbGl6YXRpb25zIGZvciBrZXlcbiAgY29uc3QgLyoqIE9iamVjdDxzdHJpbmcsc3RyaW5nPiAqLyBsb2NhbGl6YXRpb25zRm9yS2V5ID0gbG9jYWxpemF0aW9uc1trZXldO1xuICBpZiAobG9jYWxpemF0aW9uc0ZvcktleSkge1xuICAgIFxuICAgIC8vIEdldCB0aGUgdXNlcnMgc3BlY2lmaWMgbG9jYWxpemF0aW9uIG9yIGZhbGxiYWNrIHRvIGRlZmF1bHQgbGFuZ3VhZ2VcbiAgICBsZXQgc3RyaW5nID0gbG9jYWxpemF0aW9uc0ZvcktleVtsYW5ndWFnZV0gfHwgbG9jYWxpemF0aW9uc0ZvcktleVtkZWZhdWx0TGFuZ3VhZ2VdO1xuICAgIGlmIChzdHJpbmcpIHJldHVybiBzdHJpbmc7XG4gIH1cbiAgXG4gIGVycm9yKGBObyBsb2NhbGl6ZWQgc3RyaW5nIGZvdW5kIGZvciBrZXkgJyR7a2V5fSdgKTtcbiAgcmV0dXJuICcnO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbG9jYWxpemVkIHZlcnNpb24gb2YgdGhlIHN0cmluZyBkZXNpZ25hdGVkIGJ5IHRoZSBzcGVjaWZpZWQga2V5IHdpdGggdGFncyByZXBsYWNlZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSB0aGUga2V5IGZvciBhIHN0cmluZyBcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8c3RyaW5nPj59IHJlcGxhY2VtZW50cyAtIGFuIGFycmF5IG9mIGFycmF5cyBjb250YWluaW5nIHBhaXJzIG9mIHRhZ3MgYW5kIHRoZWlyIHJlcGxhY2VtZW50XG4gKiBAcGFyYW0ge3N0cmluZz19IGxhbmd1YWdlIC0gdHdvLWxldHRlciBJU08gNjM5LTEgbGFuZ3VhZ2UgY29kZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgbG9jYWxpemVkU3RyaW5nV2l0aFJlcGxhY2VtZW50cyA9IGZ1bmN0aW9uKGtleSwgcmVwbGFjZW1lbnRzLCBsYW5ndWFnZSkge1xuICBcbiAgbGV0IHN0cmluZyA9IGxvY2FsaXplZFN0cmluZyhrZXksIGxhbmd1YWdlKTtcbiAgXG4gIC8vIFJlcGxhY2UgdGFncyBvZiB0aGUgZm9ybSBbWFhYXSB3aXRoIGRpcmVjdGVkIHJlcGxhY2VtZW50cyBpZiBuZWVkZWRcbiAgZm9yIChsZXQgaW5kZXggPSByZXBsYWNlbWVudHMubGVuZ3RoOyBpbmRleC0tOyApIHtcbiAgICBsZXQgcmVwbGFjZW1lbnQgPSByZXBsYWNlbWVudHNbaW5kZXhdO1xuICAgIFxuICAgIC8vIEVuc3VyZSB0YWdzIGRvIG5vdCBjb250YWluIHNwZWNpYWwgY2hhcmFjdGVycyAodGhpcyBnZXRzIG9wdGltaXNlZCBhd2F5IGFzIG9wcG9zZWQgdG8gZXNjYXBpbmcgdGhlIHRhZ3Mgd2l0aCB0aGUgYXNzb2NpYXRlZCBwZXJmb3JtYW5jZSBjb3N0KVxuICAgIGlmICgvW14tXzAtOWEtekEtWlxcL10vLnRlc3QocmVwbGFjZW1lbnRbMF0pKSB7XG4gICAgICBlcnJvcihgSW52YWxpZCBjaGFyYWN0ZXJzIHVzZWQgaW4gbG9jYWxpemVkIHN0cmluZyB0YWcgJyR7cmVwbGFjZW1lbnRbMF19J2ApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFxcXFxbJHtyZXBsYWNlbWVudFswXX1cXFxcXWAsICdnJyk7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocmVnZXgsIHJlcGxhY2VtZW50WzFdKTtcbiAgfVxuXG4gIHJldHVybiBzdHJpbmc7XG59O1xuIiwiaW1wb3J0IHsgaW5mbyB9IGZyb20gJy4vbG9nZ2VyLmpzJ1xuaW1wb3J0IHsgbG9jYWxpemVkU3RyaW5nLCBsb2NhbGl6ZWRTdHJpbmdXaXRoUmVwbGFjZW1lbnRzIH0gZnJvbSAnLi9sb2NhbGl6YXRpb24uanMnXG5cbi8vIEhpZGUgcGFnZSBkdXJpbmcgbG9hZGluZ1xuY29uc3QgaHRtbFRhZyA9IC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovIChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF0pO1xuaHRtbFRhZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cbiAgLy8gTG9jYWxpemUgdGV4dCBlbGVtZW50c1xuICBjb25zdCBsb2NhbGl6ZWRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2xvY2FsaXplZC1zdHJpbmcnKTtcbiAgZm9yIChsZXQgaW5kZXggPSAwLCBlbGVtZW50OyBlbGVtZW50ID0gbG9jYWxpemVkRWxlbWVudHNbaW5kZXhdOyBpbmRleCsrKSB7XG4gICAgY29uc3Qga2V5ID0gZWxlbWVudC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgXG4gICAgbGV0IHN0cmluZztcbiAgICBpZiAoa2V5ID09ICdjaHJvbWUtZmxhZ3Mtd2FybmluZycpIHtcbiAgICAgIHN0cmluZyA9IGxvY2FsaXplZFN0cmluZ1dpdGhSZXBsYWNlbWVudHMoa2V5LCBbXG4gICAgICAgIFsnZW1waGFzaXMnLCAnPHNwYW4gY2xhc3M9XCJ3YXJuaW5nLWVtcGhhc2lzXCI+J10sXG4gICAgICAgIFsnL2VtcGhhc2lzJywgJzwvc3Bhbj4nXSxcbiAgICAgIF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHJpbmcgPSBsb2NhbGl6ZWRTdHJpbmcoa2V5KTtcbiAgICB9IFxuICAgIFxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc3RyaW5nO1xuICB9XG5cbiAgLy8gTWFrZSBwYWdlIHZpc2libGVcbiAgaHRtbFRhZy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpO1xuXG4gIC8vIE9wZW4gcmVxdWlyZWQgQ2hyb21lIGZsYWcgaWYgd2FybmluZyBidXR0b24gY2xpY2tlZFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZy1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgY2hyb21lLnRhYnMuY3JlYXRlKHt1cmw6ICdjaHJvbWU6Ly9mbGFncy8jZW5hYmxlLXN1cmZhY2VzLWZvci12aWRlb3MnfSk7XG4gIH0pO1xuICBcbiAgLy8gVGVzdCBmb3IgUGljdHVyZSBpbiBQaWN0dXJlIHN1cHBvcnQgYW5kIGRpc3BsYXkgd2FybmluZyB0byBhY3RpdmF0ZSBDaHJvbWUgZmxhZ3MgaWYgbmVlZGVkXG4gIGNvbnN0IHZpZGVvID0gLyoqIEB0eXBlIHtIVE1MVmlkZW9FbGVtZW50fSAqLyAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3QtdmlkZW8nKSk7XG4gIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCBmdW5jdGlvbigpIHtcbiAgICB2aWRlby5yZXF1ZXN0UGljdHVyZUluUGljdHVyZSgpLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAvKiogQHR5cGUge0Vycm9yfSAqLyAoZXJyb3IpLm1lc3NhZ2U7XG4gICAgICBpZiAofmVycm9yTWVzc2FnZS5pbmRleE9mKCdQaWN0dXJlLWluLVBpY3R1cmUgaXMgbm90IGF2YWlsYWJsZScpKSB7XG4gICAgICAgIGluZm8oJ1BpY3R1cmUtaW4tUGljdHVyZSBOT1Qgc3VwcG9ydGVkJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZm8oJ1BpY3R1cmUtaW4tUGljdHVyZSBJUyBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLAoibmFtZXMiOlsiZXJyb3IiLCJjb25zb2xlIiwiYmluZCIsImxvZ2dpbmdQcmVmaXgiLCJsb2NhbGl6YXRpb25zIiwibG9jYWxpemVkU3RyaW5nIiwia2V5IiwibGFuZ3VhZ2UiLCJuYXZpZ2F0b3IiLCJzdWJzdHJpbmciLCJsb2NhbGl6YXRpb25zRm9yS2V5Iiwic3RyaW5nIiwiZGVmYXVsdExhbmd1YWdlIiwibG9jYWxpemVkU3RyaW5nV2l0aFJlcGxhY2VtZW50cyIsInJlcGxhY2VtZW50cyIsImluZGV4IiwibGVuZ3RoIiwicmVwbGFjZW1lbnQiLCJ0ZXN0IiwicmVwbGFjZSIsInJlZ2V4IiwiUmVnRXhwIiwiaHRtbFRhZyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzdHlsZSIsImRpc3BsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwibG9jYWxpemVkRWxlbWVudHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZWxlbWVudCIsInRleHRDb250ZW50IiwidHJpbSIsImlubmVySFRNTCIsInJlbW92ZVByb3BlcnR5IiwiZ2V0RWxlbWVudEJ5SWQiLCJjaHJvbWUiLCJ0YWJzIiwiY3JlYXRlIiwidXJsIiwidmlkZW8iLCJyZXF1ZXN0UGljdHVyZUluUGljdHVyZSIsImNhdGNoIiwibWVzc2FnZSIsImluZGV4T2YiXQp9Cg==
