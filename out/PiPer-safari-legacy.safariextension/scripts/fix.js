var a;a||(a=!0,(()=>{'use strict';let d=null,e=0,f={};const h=[],k=[],l=window.setTimeout,m=window.clearTimeout,n=window.requestAnimationFrame;window.requestAnimationFrame=function(a){let c=0;d||(c=n(a),h.push(c));k.push(a);return c};function p(){h.length=0;k.length=0;n(p)}p();function q(){var a=k.slice();k.length=0;const c=window.performance.now();for(var b;b=a.pop();)b(c);a=f;f={};for(let g in a)if(b=a[g],b[0]<=c)if("function"==typeof b[1])b[1]();else eval(b[1]);else f[g]=b}
function r(a,c){const b=e++;f[b.toString()]=[window.performance.now()+(c||0),a];return b}function t(a){a&&delete f[a.toString()]}
document.addEventListener("visibilitychange",function(){if(document.hidden){var a=document.querySelectorAll("video");for(var c=a.length;c--;){const g=a[c];var b="picture-in-picture"==g.webkitPresentationMode;if(b){d=g;break}}if(d){for(;b=h.pop();)window.cancelAnimationFrame(b);window.setTimeout=r;window.clearTimeout=t;d.addEventListener("timeupdate",q)}}else if(d){window.setTimeout=l;window.clearTimeout=m;d.removeEventListener("timeupdate",q);d=null;for(a=k.length;a--;)c=n(k[a]),h.push(c);a=window.performance.now();
for(b in f)c=f[b],l(c[1],c[0]-a);f={}}});})());
//# sourceMappingURL=data:application/json;base64,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QSxDQUVBLElBQUEsQ0FBa0JjLENBQWxCLENBQTRCWCxDQUFBLENBQVNxQixHQUFULEVBQTVCLENBQUEsQ0FDRWxCLE1BQUEsQ0FBT21DLG9CQUFQLENBQTRCM0IsQ0FBNUIsQ0FHRlIsT0FBQSxDQUFPQyxVQUFQLENBQW9Cc0IsQ0FDcEJ2QixPQUFBLENBQU9HLFlBQVAsQ0FBc0JzQixDQUV0Qi9CLEVBQUEsQ0FBWWlDLGdCQUFaLENBQTZCLFlBQTdCLENBQTJDZixDQUEzQyxDQVRBLENBVm1CLENBQXJCLElBdUJPLElBQUlsQixDQUFKLENBQWlCLENBSXRCTSxNQUFBLENBQU9DLFVBQVAsQ0FBb0JGLENBQ3BCQyxPQUFBLENBQU9HLFlBQVAsQ0FBc0JELENBRXRCUixFQUFBLENBQVkwQyxtQkFBWixDQUFnQyxZQUFoQyxDQUE4Q3hCLENBQTlDLENBRUFsQixFQUFBLENBQWMsSUFFZCxLQUFTMkMsQ0FBVCxDQUFzQnZDLENBQXRCLENBQWdDYSxNQUFoQyxDQUF3QzBCLENBQUEsRUFBeEMsQ0FBQSxDQUNNN0IsQ0FDSixDQURjSixDQUFBLENBQThCTixDQUFBLENBQVV1QyxDQUFWLENBQTlCLENBQ2QsQ0FBQXhDLENBQUEsQ0FBU1ksSUFBVCxDQUFjRCxDQUFkLENBR0lPLEVBQUFBLENBQVlmLE1BQUEsQ0FBT2dCLFdBQVAsQ0FBbUJDLEdBQW5CLEVBQ2xCO0lBQVNHLENBQVQsR0FBZXhCLEVBQWYsQ0FDTXlCLENBQ0osQ0FEY3pCLENBQUEsQ0FBU3dCLENBQVQsQ0FDZCxDQUFBckIsQ0FBQSxDQUFtQnNCLENBQUEsQ0FBUSxDQUFSLENBQW5CLENBQStCQSxDQUFBLENBQVEsQ0FBUixDQUEvQixDQUE0Q04sQ0FBNUMsQ0FFRm5CLEVBQUEsQ0FBVyxFQXJCVyxDQXpCeUIsQ0FpRG5EOyIsCiJzb3VyY2VzIjpbIi4vZml4LmpzIiwiLi92aWRlby5qcyJdLAoic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5mbyB9IGZyb20gJy4vbG9nZ2VyLmpzJ1xuaW1wb3J0IHsgdmlkZW9QbGF5aW5nUGljdHVyZUluUGljdHVyZSB9IGZyb20gJy4vdmlkZW8uanMnXG5cbmxldCBhY3RpdmVWaWRlbyA9IG51bGw7XG5sZXQgdGltZW91dElkID0gMDtcbmxldCAvKiogIU9iamVjdDxzdHJpbmcsIEFycmF5PiAqLyB0aW1lb3V0cyA9IHt9O1xuXG5jb25zdCAvKiogIUFycmF5PG51bWJlcj4gKi8gcmVxdWVzdHMgPSBbXTtcbmNvbnN0IC8qKiAhQXJyYXk8ZnVuY3Rpb24obnVtYmVyKTogdW5kZWZpbmVkPiAqLyBjYWxsYmFja3MgPSBbXTtcblxuY29uc3Qgb3JpZ2luYWxTZXRUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQ7XG5jb25zdCBvcmlnaW5hbENsZWFyVGltZW91dCA9IHdpbmRvdy5jbGVhclRpbWVvdXQ7XG5jb25zdCBvcmlnaW5hbFJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbi8qKlxuICogVHJhY2tzIGFuaW1hdGlvbiBmcmFtZSByZXF1ZXN0cyBhbmQgZm9yd2FyZHMgcmVxdWVzdHMgd2hlbiBwYWdlIHZpc2libGVcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlcik6IHVuZGVmaW5lZH0gY2FsbGJhY2sgLSBhIHJlcXVlc3RBbmltYXRpb25GcmFtZSBjYWxsYmFja1xuICovXG5jb25zdCB0cmFja0FuaW1hdGlvbkZyYW1lUmVxdWVzdCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIGxldCByZXF1ZXN0ID0gMDtcblxuICBpZiAoIWFjdGl2ZVZpZGVvKSB7XG4gICAgcmVxdWVzdCA9IG9yaWdpbmFsUmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICByZXF1ZXN0cy5wdXNoKHJlcXVlc3QpO1xuICB9XG5cbiAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuXG4gIHJldHVybiByZXF1ZXN0O1xufTtcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB0cmFja0FuaW1hdGlvbkZyYW1lUmVxdWVzdDtcblxuLyoqXG4gKiBDbGVhcnMgdHJhY2tlZCBhbmltYXRpb24gZnJhbWUgcmVxdWVzdHMgb24gbmV3IGZyYW1lXG4gKi9cbmNvbnN0IGNsZWFyQW5pbWF0aW9uRnJhbWVSZXF1ZXN0cyA9IGZ1bmN0aW9uKCkge1xuICByZXF1ZXN0cy5sZW5ndGggPSAwO1xuICBjYWxsYmFja3MubGVuZ3RoID0gMDtcblxuICBvcmlnaW5hbFJlcXVlc3RBbmltYXRpb25GcmFtZShjbGVhckFuaW1hdGlvbkZyYW1lUmVxdWVzdHMpO1xufTtcbmNsZWFyQW5pbWF0aW9uRnJhbWVSZXF1ZXN0cygpO1xuXG4vKipcbiAqIENhbGxzIHRyYWNrZWQgYW5pbWF0aW9uIGZyYW1lIHJlcXVlc3RzIGFuZCB0aW1lb3V0c1xuICovXG5jb25zdCBjYWxsQW5pbWF0aW9uRnJhbWVSZXF1ZXN0c0FuZFRpbWVvdXRzID0gZnVuY3Rpb24oKSB7XG4gIFxuICAvLyBDb3B5IGFuaW1hdGlvbiBmcmFtZSBjYWxsYmFja3MgYmVmb3JlIGNhbGxpbmcgdG8gcHJldmVudCBlbmRsZXNzIGxvb3BpbmdcbiAgY29uc3QgY2FsbGJhY2tzQ29weSA9IGNhbGxiYWNrcy5zbGljZSgpO1xuICBjYWxsYmFja3MubGVuZ3RoID0gMDtcblxuICAvLyBDYWxsIGFuaW1hdGlvbiBmcmFtZSByZXF1ZXN0c1xuICBjb25zdCB0aW1lc3RhbXAgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG4gIGZvciAobGV0IGNhbGxiYWNrOyBjYWxsYmFjayA9IGNhbGxiYWNrc0NvcHkucG9wKCk7KSB7XG4gICAgY2FsbGJhY2sodGltZXN0YW1wKTtcbiAgfVxuXG4gIC8vIENvcHkgdGltZW91dHMgdG8gcHJldmVudCBlbmRsZXNzIGxvb3BpbmdcbiAgY29uc3QgdGltZW91dHNDb3B5ID0gdGltZW91dHM7XG4gIHRpbWVvdXRzID0ge307XG4gIFxuICAvLyBDYWxsIGVsYXBzZWQgdGltZW91dHNcbiAgZm9yIChsZXQgaWQgaW4gdGltZW91dHNDb3B5KSB7XG4gICAgbGV0IHRpbWVvdXQgPSB0aW1lb3V0c0NvcHlbaWRdO1xuICAgIGlmICh0aW1lb3V0WzBdIDw9IHRpbWVzdGFtcCkge1xuICAgICAgaWYgKHR5cGVvZiB0aW1lb3V0WzFdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aW1lb3V0WzFdKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmFsKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodGltZW91dFsxXSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0c1tpZF0gPSB0aW1lb3V0O1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBBdm9pZHMgYmFja2dyb3VuZCB0aHJvdHRsaW5nIGJ5IGludm9raW5nIHRpbWVvdXRzIHdpdGggbWVkaWEgJ3RpbWV1cGRhdGUnIGV2ZW50c1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb258VHJ1c3RlZFNjcmlwdHxzdHJpbmd9IGNhbGxiYWNrIC0gYSBzZXRUaW1lb3V0IGNhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcj19IHRpbWVvdXQgLSBhIGRlbGF5IGluIG1zXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmNvbnN0IHVudGhyb3R0bGVkU2V0VGltZW91dCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aW1lb3V0KSB7XG4gIGNvbnN0IGlkID0gdGltZW91dElkKys7XG4gIHRpbWVvdXRzW2lkLnRvU3RyaW5nKCldID0gW3dpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSArICh0aW1lb3V0IHx8IDApLCBjYWxsYmFja107XG4gIHJldHVybiBpZDtcbn07XG5cbi8qKlxuICogQ2xlYXJzIHF1ZXVlZCB0aW1lb3V0cyB0byBiZSBpbnZva2VkIHdpdGggbWVkaWEgJ3RpbWV1cGRhdGUnIGV2ZW50c1xuICpcbiAqIEBwYXJhbSB7P251bWJlcnx1bmRlZmluZWR9IGlkIC0gYW4gaWQgcmV0dXJuZWQgYnkgdW50aHJvdHRsZWRTZXRUaW1lb3V0XG4gKi9cbmNvbnN0IHVudGhyb3R0bGVkQ2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24oaWQpIHtcbiAgaWYgKGlkKSBkZWxldGUgdGltZW91dHNbaWQudG9TdHJpbmcoKV07XG59O1xuXG4vKipcbiAqIEJ5cGFzc2VzIGJhY2tncm91bmQgdGltZXIgdGhyb3R0bGluZyB3aGVuIHZpZGVvIHBsYXlpbmcgcGljdHVyZSBpbiBwaWN0dXJlXG4gKi9cbmNvbnN0IGJ5cGFzc0JhY2tncm91bmRUaW1lclRocm90dGxpbmcgPSBmdW5jdGlvbigpIHtcblxuICBpZiAoZG9jdW1lbnQuaGlkZGVuKSB7XG5cbiAgICBjb25zdCBhbGxWaWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd2aWRlbycpO1xuICAgIGZvciAobGV0IHZpZGVvSWQgPSBhbGxWaWRlb3MubGVuZ3RoOyB2aWRlb0lkLS07KSB7XG4gICAgICBjb25zdCB2aWRlbyA9IC8qKiBAdHlwZSB7P0hUTUxWaWRlb0VsZW1lbnR9ICovIChhbGxWaWRlb3NbdmlkZW9JZF0pO1xuICAgICAgaWYgKHZpZGVvUGxheWluZ1BpY3R1cmVJblBpY3R1cmUodmlkZW8pKSB7XG4gICAgICAgIGFjdGl2ZVZpZGVvID0gdmlkZW87XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWFjdGl2ZVZpZGVvKSByZXR1cm47XG4gICAgXG4gICAgZm9yIChsZXQgcmVxdWVzdDsgcmVxdWVzdCA9IHJlcXVlc3RzLnBvcCgpOykge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3QpO1xuICAgIH1cblxuICAgIHdpbmRvdy5zZXRUaW1lb3V0ID0gdW50aHJvdHRsZWRTZXRUaW1lb3V0O1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQgPSB1bnRocm90dGxlZENsZWFyVGltZW91dDtcbiAgICBcbiAgICBhY3RpdmVWaWRlby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgY2FsbEFuaW1hdGlvbkZyYW1lUmVxdWVzdHNBbmRUaW1lb3V0cyk7XG5cbiAgICBpbmZvKCdCeXBhc3NpbmcgYmFja2dyb3VuZCB0aW1lciB0aHJvdHRsaW5nJyk7XG5cbiAgfSBlbHNlIGlmIChhY3RpdmVWaWRlbykge1xuXG4gICAgaW5mbygnRmluaXNoZWQgYnlwYXNzaW5nIGJhY2tncm91bmQgdGltZXIgdGhyb3R0bGluZycpO1xuXG4gICAgd2luZG93LnNldFRpbWVvdXQgPSBvcmlnaW5hbFNldFRpbWVvdXQ7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCA9IG9yaWdpbmFsQ2xlYXJUaW1lb3V0O1xuXG4gICAgYWN0aXZlVmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGNhbGxBbmltYXRpb25GcmFtZVJlcXVlc3RzQW5kVGltZW91dHMpO1xuXG4gICAgYWN0aXZlVmlkZW8gPSBudWxsO1xuXG4gICAgZm9yIChsZXQgY2FsbGJhY2tJZCA9IGNhbGxiYWNrcy5sZW5ndGg7IGNhbGxiYWNrSWQtLTspIHtcbiAgICAgIGxldCByZXF1ZXN0ID0gb3JpZ2luYWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2tzW2NhbGxiYWNrSWRdKTtcbiAgICAgIHJlcXVlc3RzLnB1c2gocmVxdWVzdCk7XG4gICAgfVxuXG4gICAgY29uc3QgdGltZXN0YW1wID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGZvciAobGV0IGlkIGluIHRpbWVvdXRzKSB7XG4gICAgICBsZXQgdGltZW91dCA9IHRpbWVvdXRzW2lkXTtcbiAgICAgIG9yaWdpbmFsU2V0VGltZW91dCh0aW1lb3V0WzFdLCB0aW1lb3V0WzBdIC0gdGltZXN0YW1wKTtcbiAgICB9XG4gICAgdGltZW91dHMgPSB7fTtcbiAgfVxufTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBieXBhc3NCYWNrZ3JvdW5kVGltZXJUaHJvdHRsaW5nKTtcbiIsImltcG9ydCB7IGluZm8gfSBmcm9tICcuL2xvZ2dlci5qcydcbmltcG9ydCB7IEJyb3dzZXIsIGdldEJyb3dzZXIsIGdldFJlc291cmNlIH0gZnJvbSAnLi9jb21tb24uanMnXG5cbmNvbnN0IENIUk9NRV9QTEFZSU5HX1BJUF9BVFRSSUJVVEUgPSAnZGF0YS1wbGF5aW5nLXBpY3R1cmUtaW4tcGljdHVyZSc7XG5cbmNvbnN0IC8qKiAhQXJyYXk8ZnVuY3Rpb24oSFRNTFZpZGVvRWxlbWVudCwgYm9vbGVhbik+ICovIGV2ZW50TGlzdGVuZXJzID0gW107XG5cbi8qKlxuICogVG9nZ2xlcyB2aWRlbyBQaWN0dXJlIGluIFBpY3R1cmVcbiAqXG4gKiBAcGFyYW0ge0hUTUxWaWRlb0VsZW1lbnR9IHZpZGVvIC0gdmlkZW8gZWxlbWVudCB0byB0b2dnbGUgUGljdHVyZSBpbiBQaWN0dXJlIG1vZGVcbiAqL1xuZXhwb3J0IGNvbnN0IHRvZ2dsZVBpY3R1cmVJblBpY3R1cmUgPSBmdW5jdGlvbih2aWRlbykge1xuICBjb25zdCBwbGF5aW5nUGljdHVyZUluUGljdHVyZSA9IHZpZGVvUGxheWluZ1BpY3R1cmVJblBpY3R1cmUodmlkZW8pO1xuICBzd2l0Y2ggKGdldEJyb3dzZXIoKSkge1xuICAgIGNhc2UgQnJvd3Nlci5TQUZBUkk6XG4gICAgICBpZiAocGxheWluZ1BpY3R1cmVJblBpY3R1cmUpIHtcbiAgICAgIFx0dmlkZW8ud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSgnaW5saW5lJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWRlby53ZWJraXRTZXRQcmVzZW50YXRpb25Nb2RlKCdwaWN0dXJlLWluLXBpY3R1cmUnKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQnJvd3Nlci5DSFJPTUU6XG4gICAgICBpZiAocGxheWluZ1BpY3R1cmVJblBpY3R1cmUpIHtcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBDaHJvbWUgY29udGVudCBzY3JpcHRzIGJlaW5nIHVuYWJsZSB0byBjYWxsICdleGl0UGljdHVyZUluUGljdHVyZScgZGlyZWN0bHlcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHNjcmlwdC50ZXh0Q29udGVudCA9ICdkb2N1bWVudC5leGl0UGljdHVyZUluUGljdHVyZSgpJztcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3JjZSBlbmFibGUgUGljdHVyZSBpbiBQaWN0dXJlIG1vZGUgc3VwcG9ydFxuICAgICAgICB2aWRlby5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVwaWN0dXJlaW5waWN0dXJlJyk7XG4gICAgICAgIFxuICAgICAgICB2aWRlby5yZXF1ZXN0UGljdHVyZUluUGljdHVyZSgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCcm93c2VyLlVOS05PV046XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG4vKipcbiAqIEFkZHMgYSBQaWN0dXJlIGluIFBpY3R1cmUgZXZlbnQgbGlzdGVuZXJcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKEhUTUxWaWRlb0VsZW1lbnQsIGJvb2xlYW4pfSBsaXN0ZW5lciAtIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGFkZFxuICovXG5leHBvcnQgY29uc3QgYWRkUGljdHVyZUluUGljdHVyZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICBjb25zdCBpbmRleCA9IGV2ZW50TGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICBldmVudExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGlmIChnZXRCcm93c2VyKCkgPT0gQnJvd3Nlci5TQUZBUkkpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRwcmVzZW50YXRpb25tb2RlY2hhbmdlZCcsIHZpZGVvUHJlc2VudGF0aW9uTW9kZUNoYW5nZWQsIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIFBpY3R1cmUgaW4gUGljdHVyZSBldmVudCBsaXN0ZW5lclxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oSFRNTFZpZGVvRWxlbWVudCxib29sZWFuKX0gbGlzdGVuZXIgLSBhbiBldmVudCBsaXN0ZW5lciB0byByZW1vdmVcbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZVBpY3R1cmVJblBpY3R1cmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgY29uc3QgaW5kZXggPSBldmVudExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICBldmVudExpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG4gIFxuICBpZiAoZ2V0QnJvd3NlcigpID09IEJyb3dzZXIuU0FGQVJJICYmIGV2ZW50TGlzdGVuZXJzLmxlbmd0aCA9PSAwKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Via2l0cHJlc2VudGF0aW9ubW9kZWNoYW5nZWQnLCB2aWRlb1ByZXNlbnRhdGlvbk1vZGVDaGFuZ2VkKTsgICAgXG4gIH1cbn07XG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhIFBpY3R1cmUgaW4gUGljdHVyZSBldmVudFxuICpcbiAqIEBwYXJhbSB7SFRNTFZpZGVvRWxlbWVudH0gdmlkZW8gLSB0YXJnZXQgdmlkZW8gZWxlbWVudFxuICovXG5jb25zdCBkaXNwYXRjaFBpY3R1cmVJblBpY3R1cmVFdmVudCA9IGZ1bmN0aW9uKHZpZGVvKSB7XG4gIFxuICAvLyBJZ25vcmUgZXZlbnRzIGZyb20gb3RoZXIgdmlkZW8gZWxlbWVudHMgZS5nLiBhZHZlcnRzXG4gIGNvbnN0IGV4cGVjdGVkVmlkZW8gPSBnZXRSZXNvdXJjZSgpLnZpZGVvRWxlbWVudCh0cnVlKTtcbiAgaWYgKHZpZGVvICE9IGV4cGVjdGVkVmlkZW8pIHJldHVybjtcblxuICBjb25zdCBpc1BsYXlpbmdQaWN0dXJlSW5QaWN0dXJlID0gdmlkZW9QbGF5aW5nUGljdHVyZUluUGljdHVyZSh2aWRlbyk7XG4gIGlmIChpc1BsYXlpbmdQaWN0dXJlSW5QaWN0dXJlKSB7XG4gICAgaW5mbygnVmlkZW8gZW50ZXJpbmcgUGljdHVyZSBpbiBQaWN0dXJlIG1vZGUnKTtcbiAgfSBlbHNlIHtcbiAgICBpbmZvKCdWaWRlbyBsZWF2aW5nIFBpY3R1cmUgaW4gUGljdHVyZSBtb2RlJyk7XG4gIH1cblxuICAvLyBDYWxsIGV2ZW50IGxpc3RlbmVycyB1c2luZyBhIGNvcHkgdG8gcHJldmVudCBwb3NzaWJsaXR5IG9mIGVuZGxlc3MgbG9vcGluZ1xuICBjb25zdCBldmVudExpc3RlbmVyc0NvcHkgPSBldmVudExpc3RlbmVycy5zbGljZSgpO1xuICBmb3IgKGxldCBsaXN0ZW5lcjsgbGlzdGVuZXIgPSBldmVudExpc3RlbmVyc0NvcHkucG9wKCk7KSB7XG4gICAgbGlzdGVuZXIodmlkZW8sIGlzUGxheWluZ1BpY3R1cmVJblBpY3R1cmUpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhIFBpY3R1cmUgaW4gUGljdHVyZSBldmVudCBmb3IgZXZlcnkgJ3dlYmtpdHByZXNlbnRhdGlvbm1vZGVjaGFuZ2VkJyBldmVudFxuICpcbiAqIEBwYXJhbSB7IUV2ZW50fSBldmVudCAtIGEgd2Via2l0cHJlc2VudGF0aW9ubW9kZWNoYW5nZWQgZXZlbnRcbiAqL1xuY29uc3QgdmlkZW9QcmVzZW50YXRpb25Nb2RlQ2hhbmdlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gIGNvbnN0IHZpZGVvID0gIC8qKiBAdHlwZSB7SFRNTFZpZGVvRWxlbWVudH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gIGRpc3BhdGNoUGljdHVyZUluUGljdHVyZUV2ZW50KHZpZGVvKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHZpZGVvIGlzIHBsYXlpbmcgUGljdHVyZSBpbiBQaWN0dXJlXG4gKlxuICogQHBhcmFtIHtIVE1MVmlkZW9FbGVtZW50fSB2aWRlbyAtIHZpZGVvIGVsZW1lbnQgdG8gdGVzdFxuICogQHJldHVybiB7Ym9vbGVhbn0gXG4gKi9cbmV4cG9ydCBjb25zdCB2aWRlb1BsYXlpbmdQaWN0dXJlSW5QaWN0dXJlID0gZnVuY3Rpb24odmlkZW8pIHtcbiAgc3dpdGNoIChnZXRCcm93c2VyKCkpIHtcbiAgICBjYXNlIEJyb3dzZXIuU0FGQVJJOlxuICAgICAgcmV0dXJuIHZpZGVvLndlYmtpdFByZXNlbnRhdGlvbk1vZGUgPT0gJ3BpY3R1cmUtaW4tcGljdHVyZSc7XG4gICAgY2FzZSBCcm93c2VyLkNIUk9NRTpcbiAgICAgIHJldHVybiB2aWRlby5oYXNBdHRyaWJ1dGUoQ0hST01FX1BMQVlJTkdfUElQX0FUVFJJQlVURSk7XG4gICAgY2FzZSBCcm93c2VyLlVOS05PV046XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXRzIFBpY3R1cmUgaW4gUGljdHVyZSBhdHRyaWJ1dGUgYW5kIHRvZ2dsZXMgY2FwdGlvbnMgb24gZW50ZXJpbmcgUGljdHVyZSBpbiBQaWN0dXJlIG1vZGVcbiAqXG4gKiBAcGFyYW0geyFFdmVudH0gZXZlbnQgLSBhbiBlbnRlcnBpY3R1cmVpbnBpY3R1cmUgZXZlbnRcbiAqL1xuY29uc3QgdmlkZW9EaWRFbnRlclBpY3R1cmVJblBpY3R1cmUgPSBmdW5jdGlvbihldmVudCkge1xuICBjb25zdCB2aWRlbyA9IC8qKiBAdHlwZSB7SFRNTFZpZGVvRWxlbWVudH0gKi8gKGV2ZW50LnRhcmdldCk7XG5cbiAgLy8gU2V0IHBsYXlpbmcgaW4gUGljdHVyZSBpbiBQaWN0dXJlIG1vZGUgYXR0cmlidXRlIGFuZCBkaXNwYXRjaCBldmVudFxuICB2aWRlby5zZXRBdHRyaWJ1dGUoQ0hST01FX1BMQVlJTkdfUElQX0FUVFJJQlVURSwgdHJ1ZSk7XG4gIGRpc3BhdGNoUGljdHVyZUluUGljdHVyZUV2ZW50KHZpZGVvKTtcblxuICAvLyBSZW1vdmUgUGljdHVyZSBpbiBQaWN0dXJlIGF0dHJpYnV0ZSBhbmQgZGlzcGF0Y2ggZXZlbnQgb24gbGVhdmluZyBQaWN0dXJlIGluIFBpY3R1cmUgbW9kZVxuICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdsZWF2ZXBpY3R1cmVpbnBpY3R1cmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgIHZpZGVvLnJlbW92ZUF0dHJpYnV0ZShDSFJPTUVfUExBWUlOR19QSVBfQVRUUklCVVRFKTtcbiAgICBkaXNwYXRjaFBpY3R1cmVJblBpY3R1cmVFdmVudCh2aWRlbyk7XG4gIH0sIHsgb25jZTogdHJ1ZSB9KTtcbn07XG5cbi8qKlxuICogQWRkcyBQaWN0dXJlIGluIFBpY3R1cmUgZXZlbnQgbGlzdGVuZXJzIHRvIGFsbCB2aWRlbyBlbGVtZW50c1xuICovXG5leHBvcnQgY29uc3QgYWRkVmlkZW9FbGVtZW50TGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJyk7XG4gIGZvciAobGV0IGluZGV4ID0gMCwgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTsgaW5kZXgrKykge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZW50ZXJwaWN0dXJlaW5waWN0dXJlJywgdmlkZW9EaWRFbnRlclBpY3R1cmVJblBpY3R1cmUpO1xuICB9XG59O1xuIl0sCiJuYW1lcyI6WyJhY3RpdmVWaWRlbyIsInRpbWVvdXRJZCIsInRpbWVvdXRzIiwicmVxdWVzdHMiLCJjYWxsYmFja3MiLCJvcmlnaW5hbFNldFRpbWVvdXQiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0Iiwib3JpZ2luYWxDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJvcmlnaW5hbFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInRyYWNrQW5pbWF0aW9uRnJhbWVSZXF1ZXN0IiwiY2FsbGJhY2siLCJyZXF1ZXN0IiwicHVzaCIsImNsZWFyQW5pbWF0aW9uRnJhbWVSZXF1ZXN0cyIsImxlbmd0aCIsImNhbGxBbmltYXRpb25GcmFtZVJlcXVlc3RzQW5kVGltZW91dHMiLCJjYWxsYmFja3NDb3B5Iiwic2xpY2UiLCJ0aW1lc3RhbXAiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInBvcCIsInRpbWVvdXRzQ29weSIsImlkIiwidGltZW91dCIsImV2YWwiLCJ1bnRocm90dGxlZFNldFRpbWVvdXQiLCJ0b1N0cmluZyIsInVudGhyb3R0bGVkQ2xlYXJUaW1lb3V0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiYnlwYXNzQmFja2dyb3VuZFRpbWVyVGhyb3R0bGluZyIsImhpZGRlbiIsImFsbFZpZGVvcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ2aWRlb0lkIiwidmlkZW8iLCJ3ZWJraXRQcmVzZW50YXRpb25Nb2RlIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FsbGJhY2tJZCJdCn0K
